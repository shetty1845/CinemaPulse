{% extends 'base.html' %}

{% block title %}Search Results - CinemaPulse{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header fade-in-up">
        <h1 class="page-title gradient-text">
            <i class="fas fa-search"></i> Search Results
        </h1>
        <p class="page-subtitle">Showing results for "{{ query }}"</p>
    </div>

    <!-- Results Grid -->
    {% if movies %}
    <div class="movies-grid fade-in">
        {% for movie in movies %}
        <div class="movie-card glass-effect hover-lift" style="animation-delay: {{ loop.index0 * 0.1 }}s">
            <div class="movie-poster-wrapper">
                <img src="{{ movie.image_url }}" alt="{{ movie.title }}" class="movie-poster">
                <div class="movie-overlay">
                    <a href="/movie/{{ movie.movie_id }}" class="btn btn-secondary btn-sm">
                        <i class="fas fa-info-circle"></i> View Details
                    </a>
                    <a href="/feedback/{{ movie.movie_id }}" class="btn btn-primary btn-sm">
                        <i class="fas fa-star"></i> Rate Movie
                    </a>
                </div>
            </div>

            <div class="movie-info">
                <div class="movie-header">
                    <h3 class="movie-title">{{ movie.title }}</h3>
                    <span class="movie-genre">
                        <i class="fas fa-tag"></i> {{ movie.genre }}
                    </span>
                </div>

                <p class="movie-description">{{ movie.description[:120] }}...</p>

                <div class="movie-meta">
                    <span class="meta-item">
                        <i class="fas fa-calendar"></i> {{ movie.release_year }}
                    </span>
                </div>

                <div class="movie-stats">
                    <div class="stat-badge">
                        <i class="fas fa-star rating-icon"></i>
                        <span class="rating-value">{{ "%.1f"|format(movie.avg_rating) }}</span>
                        <span class="rating-label">/5.0</span>
                    </div>
                    <div class="stat-badge">
                        <i class="fas fa-comments"></i>
                        <span>{{ movie.total_reviews }} reviews</span>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state glass-effect fade-in">
        <i class="fas fa-search empty-icon"></i>
        <h3>No Movies Found</h3>
        <p>We couldn't find any movies matching "{{ query }}".</p>
        <a href="/movies" class="btn btn-primary">
            <i class="fas fa-film"></i> Browse All Movies
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}